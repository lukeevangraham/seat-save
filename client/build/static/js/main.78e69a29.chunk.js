(this.webpackJsonpmern=this.webpackJsonpmern||[]).push([[0],{329:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n(0),c=n.n(a),i=n(17),s=n.n(i),o=n(19),u=n(13),l=n(18),d=n(163),j=n(21),b=n(386),p=n(15),h=n.n(p),O=n(28),m=n(164),x=n.n(m).a.create({baseURL:"/"}),v="CREATE_EVENT",f="FETCH_EVENTS",g="FETCH_EVENT",y="FETCH_POPULATED_EVENT",S="DELETE_EVENT",E="EDIT_EVENT",w="CREATE_GROUP",C="EDIT_GROUP",G="DELETE_GROUP",N="CREATE_GROUP_START",k="SIGN_IN",I="SIGN_OUT",_="FETCH_MAX_GROUP_SIZE",T="FETCH_CHURCH_SETTINGS",A=function(){return function(){var e=Object(O.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.get("/event");case 2:n=e.sent,t({type:f,payload:n.data});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},D=function(e){return function(){var t=Object(O.a)(h.a.mark((function t(n){var r;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x.get("/event/".concat(e));case 2:r=t.sent,n({type:g,payload:r.data});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},z=function(e){return function(){var t=Object(O.a)(h.a.mark((function t(n){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x.delete("event/".concat(e));case 2:t.sent,n({type:S,payload:e});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},L=function(){return{type:N}},P=n(370),R=n(373),M=n(165),U=n(166),F=n(174),V=n(172),B=n(366),H=n(167),Z=n.n(H),W=function(e){Object(F.a)(n,e);var t=Object(V.a)(n);function n(){var e;Object(M.a)(this,n);for(var a=arguments.length,c=new Array(a),i=0;i<a;i++)c[i]=arguments[i];return(e=t.call.apply(t,[this].concat(c))).onAuthChange=function(t){if(t){var n=e.auth.currentUser.get().getId(),r=e.auth.currentUser.get().getBasicProfile().getName(),a=e.auth.currentUser.get().getBasicProfile().getGivenName(),c=e.auth.currentUser.get().getBasicProfile().getFamilyName(),i=e.auth.currentUser.get().getBasicProfile().getImageUrl(),s=e.auth.currentUser.get().getBasicProfile().getEmail();e.props.signIn({id:n,fullName:r,givenName:a,familyName:c,imageUrl:i,email:s})}else e.props.signOut()},e.onSignInClick=function(){e.auth.signIn()},e.onSignOutClick=function(){e.auth.signOut()},e.adminRedirect=e.props.isAdmin?Object(r.jsx)(j.a,{to:"/admin"}):null,e}return Object(U.a)(n,[{key:"componentDidMount",value:function(){var e=this;window.gapi.load("client:auth2",(function(){window.gapi.client.init({clientId:"666797596660-g0ss4568pfnjesar12r2n0irheeg92n1.apps.googleusercontent.com",scope:"email"}).then((function(){e.auth=window.gapi.auth2.getAuthInstance(),e.onAuthChange(e.auth.isSignedIn.get()),e.auth.isSignedIn.listen(e.onAuthChange)}))}))}},{key:"renderAuthButton",value:function(){return null===this.props.isSignedIn?null:this.props.isSignedIn?Object(r.jsxs)("div",{style:{display:"flex"},children:[Object(r.jsx)(B.a,{component:o.b,to:"/event-create",color:"inherit",children:"Create Event"}),Object(r.jsx)(B.a,{color:"inherit",component:o.b,to:"/settings",children:Object(r.jsx)(Z.a,{})}),Object(r.jsx)("div",{onClick:this.onSignOutClick,children:Object(r.jsx)(B.a,{color:"inherit",children:"Sign Out"})})]}):Object(r.jsx)("div",{onClick:this.onSignInClick,children:Object(r.jsx)(B.a,{color:"inherit",children:"Admin"})})}},{key:"render",value:function(){return Object(r.jsxs)("div",{children:[this.adminRedirect,this.renderAuthButton()]})}}]),n}(c.a.Component),X=Object(u.b)((function(e){return{isSignedIn:e.auth.isSignedIn}}),{signIn:function(e){return function(){var t=Object(O.a)(h.a.mark((function t(n){var r;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x.post("/user",e);case 2:(r=t.sent).data.email?n({type:k,payload:r.data}):(console.log("RES REAL: ",r.data.errorMessage),alert(r.data.errorMessage),n({type:I,payload:r.data}));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},signOut:function(){return{type:I}}})(W),q=n(176),J=n(372),$=n(374),Q=n(371),Y=Object(P.a)((function(e){return{root:{flexGrow:1,marginBottom:"2rem"},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1}}})),K=function(e){var t=Y(),n=Object(r.jsx)("div",{className:t.root,children:Object(r.jsx)(Q.a,{style:{margin:0},position:"static",children:Object(r.jsxs)(J.a,{children:[Object(r.jsx)(q.a,{variant:"h6",className:t.title,children:Object(r.jsxs)(R.a,{component:o.b,style:{color:"#fff",textDecoration:"none"},to:"/",children:[Object(r.jsx)("strong",{children:"SeatSave"})," | San Pedro Presbyterian Church"]})}),Object(r.jsx)(X,{})]})})});return window.location.pathname.startsWith("/embed")&&(n=Object(r.jsx)("div",{})),Object(r.jsxs)(r.Fragment,{children:[n,Object(r.jsx)($.a,{maxWidth:"md",children:Object(r.jsx)("main",{children:e.children})})]})},ee=n(31),te=n(390),ne=n(376),re=n(380),ae=n(379),ce=n(375),ie=n(377),se=n(378),oe=n(331),ue=n(99),le=n.n(ue),de=n(100),je=n.n(de),be=Object(P.a)((function(e){return{paper:{top:"50%",left:"50%",transform:"translate(-50%, -50%)",position:"absolute",width:400,backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3)}}})),pe=function(e){var t=be(),n=Object(a.useState)(!1),c=Object(ee.a)(n,2),i=c[0],s=c[1],u=Object(a.useState)(""),l=Object(ee.a)(u,2),d=l[0],j=l[1],b=Object(a.useState)(""),p=Object(ee.a)(b,2),h=p[0],O=p[1],m=Object(a.useState)(""),x=Object(ee.a)(m,2),v=x[0],f=x[1],g=Object(r.jsxs)("div",{className:t.paper,children:[Object(r.jsx)("h2",{children:d}),Object(r.jsx)("p",{children:h}),Object(r.jsx)("div",{children:v})]}),y=function(t,n,a){"del"===t&&(j("Delete Event"),O("Are you sure you want to delete this event named: ".concat(a)),f(Object(r.jsxs)("div",{children:[Object(r.jsx)(B.a,{variant:"contained",color:"secondary",onClick:function(){return function(t){e.delete(t),S()}(n)},children:"Delete"}),Object(r.jsx)(B.a,{style:{marginLeft:"1rem"},variant:"contained",onClick:S,children:"Cancel"})]}))),s(!0)},S=function(){s(!1)};return Object(r.jsxs)(ce.a,{component:oe.a,children:[Object(r.jsx)(te.a,{open:i,onClose:S,"aria-labelledby":"delete-event-confirmation","aria-describedby":"delete-event-confirm",children:g}),Object(r.jsxs)(ne.a,{"aria-label":"event table",children:[Object(r.jsx)(ie.a,{children:Object(r.jsxs)(se.a,{children:[Object(r.jsx)(ae.a,{}),Object(r.jsx)(ae.a,{children:"Event"}),Object(r.jsx)(ae.a,{align:"right",children:"Day"}),Object(r.jsx)(ae.a,{align:"right",children:"Date"}),Object(r.jsx)(ae.a,{align:"right",children:"Time"}),Object(r.jsx)(ae.a,{align:"right",children:"Open Spots"}),e.isAuth?Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(ae.a,{align:"right",children:"Admin"}),Object(r.jsx)(ae.a,{align:"right",children:"Groups"})]}):null]})}),Object(r.jsx)(re.a,{children:e.events.map((function(t){return Object(r.jsxs)(se.a,{children:[Object(r.jsx)(ae.a,{component:"th",scope:"row",children:Object(r.jsx)(R.a,{component:o.b,to:"/reserve/".concat(t._id),children:Object(r.jsx)(B.a,{variant:"contained",color:"primary",children:"Reserve"})})}),Object(r.jsx)(ae.a,{children:t.eventName}),Object(r.jsx)(ae.a,{align:"right",children:new Date(t.date).toLocaleDateString("us-en",{weekday:"short"})}),Object(r.jsx)(ae.a,{align:"right",children:new Date(t.date).toLocaleDateString()}),Object(r.jsx)(ae.a,{align:"right",children:new Date(t.date).toLocaleTimeString([],{timeStyle:"short"})}),Object(r.jsx)(ae.a,{align:"right",children:t.openSpots}),e.isAuth?Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)(ae.a,{align:"right",children:[" ",Object(r.jsx)(R.a,{component:o.b,to:"/events/edit/".concat(t._id),color:"textPrimary",children:Object(r.jsx)(le.a,{fontSize:"small"})}),Object(r.jsx)(R.a,{component:o.b,to:"#",color:"textPrimary",children:Object(r.jsx)(je.a,{style:{marginLeft:5},fontSize:"small",onClick:function(){return y("del",t._id,t.eventName)}})})]}),Object(r.jsx)(ae.a,{align:"right",children:Object(r.jsx)(R.a,{component:o.b,to:"/reservations/".concat(t._id),children:"View"})})]}):null]},t._id)}))})]})]})},he=Object(u.b)((function(e){return{events:e.event}}),{fetchUpcomingEvents:A,deleteEvent:z})((function(e){Object(a.useEffect)((function(){e.fetchUpcomingEvents()}),[e.fetchUpcomingEvents]);var t=Object(r.jsx)("div",{children:"Loading..."});return e.events.events.length&&(t=Object(r.jsx)(pe,{events:e.events.events,isAuth:e.isAuth,delete:e.deleteEvent})),Object(r.jsxs)("div",{children:[Object(r.jsx)("h2",{children:"Event List"}),t,Object(r.jsx)("br",{}),Object(r.jsx)("br",{})]})})),Oe=n(8),me=n(48),xe=n(389),ve=n(388),fe=n(387),ge=function(e){var t=e.label,n=e.input,a=e.meta,c=a.touched,i=a.invalid,s=a.error,o=Object(me.a)(e,["label","input","meta"]);return Object(r.jsx)(fe.a,Object(Oe.a)(Object(Oe.a)({label:t,placeholder:t,error:c&&i,helperText:c&&s},n),o))},ye=function(e){var t=e.label,n=e.input,a=e.meta,c=(a.touched,a.invalid,a.error,Object(me.a)(e,["label","input","meta"]));return Object(r.jsx)(fe.a,Object(Oe.a)(Object(Oe.a)({id:"datetime-local",label:t,type:"datetime-local",InputLabelProps:{shrink:!0}},n),c))},Se=Object(ve.a)({form:"event"})((function(e){var t=e.handleSubmit;e.pristine,e.reset,e.submitting,e.classes;return Object(r.jsxs)("form",{onSubmit:t,children:[Object(r.jsx)("div",{children:Object(r.jsx)(xe.a,{name:"eventName",component:ge,label:"Event Name"})}),Object(r.jsx)("br",{}),Object(r.jsx)("div",{children:Object(r.jsx)(xe.a,{name:"date",component:ye,label:"Event Date & Time"})}),Object(r.jsx)("br",{}),Object(r.jsx)("div",{children:Object(r.jsx)(xe.a,{name:"openSpots",component:ge,type:"number",label:"Open Spots",inputProps:{min:0}})}),Object(r.jsx)("br",{}),Object(r.jsx)("br",{}),Object(r.jsx)(B.a,{type:"submit",variant:"contained",color:"primary",children:"Submit"})]})})),Ee=Object(u.b)((function(e){return{created:e.event.created}}),{createEvent:function(e){return function(){var t=Object(O.a)(h.a.mark((function t(n){var r;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x.post("/event",e);case 2:r=t.sent,n({type:v,payload:r.data});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},startCreateGroup:L})((function(e){Object(a.useEffect)((function(){e.startCreateGroup()}),[e.startCreateGroup]);var t=e.created?Object(r.jsx)(j.a,{to:"/"}):null;return Object(r.jsxs)(c.a.Fragment,{children:[t,Object(r.jsx)("h2",{children:"Create An Event:"}),Object(r.jsx)(Se,{onSubmit:function(t){e.createEvent(t)}}),Object(r.jsx)("br",{}),Object(r.jsx)("br",{}),Object(r.jsx)("br",{})]})})),we=n(382),Ce=n(391),Ge=n(381),Ne=n(385),ke=n(384),Ie=n(383),_e=function(e){var t=e.label,n=e.input,a=e.meta,c=a.touched,i=a.invalid,s=a.error,o=Object(me.a)(e,["label","input","meta"]);return Object(r.jsx)(fe.a,Object(Oe.a)(Object(Oe.a)({label:t,placeholder:t,error:c&&i,helperText:c&&s},n),o))},Te=function(e){var t=e.label,n=e.input,a=e.meta,c=a.touched,i=a.invalid,s=a.error,o=Object(me.a)(e,["label","input","meta"]);return Object(r.jsxs)(Ge.a,{error:c&&i,component:"fieldset",children:[console.log("ERR: ",s),Object(r.jsx)(ke.a,{children:Object(r.jsx)(Ne.a,{control:Object(r.jsx)(Ce.a,Object(Oe.a)(Object(Oe.a)({checked:!!n.value,onChange:n.onChange},o),n)),label:t})}),Object(r.jsx)(Ie.a,{children:c&&s})]})},Ae=function(e){var t=e.handleSubmit;return Object(r.jsxs)("form",{onSubmit:t,children:[Object(r.jsx)("div",{children:Object(r.jsx)(xe.a,{name:"groupName",component:_e,label:"Group Name"})}),Object(r.jsx)("div",{children:Object(r.jsx)(xe.a,{name:"email",component:_e,type:"email",label:"Email",style:{width:"300px"}})}),Object(r.jsx)("div",{children:Object(r.jsx)(xe.a,{name:"groupSize",component:_e,type:"number",label:"How Many People in Your Group?",inputProps:{min:1,max:e.maxGroupSize},style:{width:"300px"}})}),e.auth?Object(r.jsx)("div",{children:Object(r.jsx)(xe.a,{name:"note",component:_e,label:"Note"})}):null,Object(r.jsx)("br",{}),Object(r.jsxs)("div",{style:{marginTop:"1rem"},children:[Object(r.jsx)(we.a,{children:"Please read and check the following"}),Object(r.jsx)("br",{}),Object(r.jsx)(xe.a,{name:"willAbide",component:Te,label:"I will abide by San Pedro best safety practices"})]}),Object(r.jsx)("p",{children:e.signupMessage}),Object(r.jsx)(B.a,{type:"submit",variant:"contained",color:"primary",children:"Submit"}),e.auth&&!window.location.pathname.startsWith("/embed")?Object(r.jsxs)("div",{style:{marginTop:"2rem",width:"80%",padding:8},children:[Object(r.jsx)("div",{children:Object(r.jsx)("strong",{children:"Form Embed Code:"})}),Object(r.jsxs)("div",{style:{backgroundColor:"#eee",padding:8},children:['<iframe src="',window.location.origin,"/embed/reserve/",e.event._id,'" title="Event Registration Form" width="100%" height="700px" style="padding:30px; border:none;"></iframe>']})]}):null]})},De=Ae=Object(ve.a)({form:"reserve",validate:function(e){console.log("VALUES ",e);var t={};return["groupName","email","groupSize","willAbide"].forEach((function(n){e[n]||(t[n]="Required")})),e.email&&!/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e.email)&&(t.email="Invalid email address"),t}})(Ae),ze=n(170),Le=n.n(ze),Pe=function(e){return Object(r.jsxs)("div",{children:[Object(r.jsx)("h3",{children:"Reservation Confirmation"}),console.log("GROUP: ",e.group),console.log("EVENT: ",e.event[0]),Object(r.jsxs)("div",{children:[Object(r.jsx)("strong",{children:"Group Name: "}),e.group.groupName," ",Object(r.jsx)("br",{}),Object(r.jsx)("strong",{children:"Group Size: "}),e.group.groupSize," ",Object(r.jsx)("br",{}),Object(r.jsx)("strong",{children:"Email: "}),e.group.email," ",Object(r.jsx)("br",{}),Object(r.jsx)("strong",{children:"Event Name: "}),e.event[0].eventName," ",Object(r.jsx)("br",{}),Object(r.jsx)("strong",{children:"Event Date: "}),new Date(e.event[0].date).toLocaleDateString("en-us")," ",Object(r.jsx)("br",{}),Object(r.jsx)("strong",{children:"Event Time: "}),new Date(e.event[0].date).toLocaleTimeString("en-us",{timeStyle:"short"})," ",Object(r.jsx)("br",{}),Object(r.jsx)("br",{}),Object(r.jsxs)("strong",{children:["Time Reservation Made:"," ",(new Date).toLocaleString("en-us",{dateStyle:"short",timeStyle:"short"})]}),Object(r.jsx)("br",{}),Object(r.jsx)("br",{}),Object(r.jsx)("hr",{}),Object(r.jsx)("br",{}),Object(r.jsx)("div",{children:"The above details have been sent to you."}),Object(r.jsx)("br",{}),Object(r.jsxs)(B.a,{variant:"contained",color:"primary",onClick:function(){return window.print()},children:[Object(r.jsx)(Le.a,{}),"Print"]})]})]})},Re=Object(u.b)((function(e,t){return{event:e.event.events.filter((function(e){return e._id===t.match.params.id})),created:e.group.created,group:e.group.group,isSignedIn:e.auth.isSignedIn,maxGroupSize:e.church.maxGroupSize,signupMessage:e.church.signupMessage}}),{fetchEvent:D,createGroup:function(e,t){return function(){var n=Object(O.a)(h.a.mark((function n(r){var a;return h.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,x.post("/group/".concat(e),t);case 2:a=n.sent,r({type:w,payload:a.data});case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},startCreateGroup:L})((function(e){Object(a.useEffect)((function(){return e.fetchEvent(e.match.params.id),function(){return e.startCreateGroup()}}),[e.fetchEvent]);var t=Object(r.jsx)("div",{children:"Loading ..."});return e.event.length>0&&(t=Object(r.jsxs)("div",{style:{paddingBottom:"1rem"},children:[Object(r.jsx)("h2",{children:"RSVP"}),Object(r.jsxs)("h4",{children:[e.event[0].eventName," -"," ",new Date(e.event[0].date).toLocaleDateString("us-en",{weekday:"short"}),", ",new Date(e.event[0].date).toLocaleString("en-us",{dateStyle:"short",timeStyle:"short"})]}),Object(r.jsx)(De,{onSubmit:function(t){e.createGroup(e.match.params.id,t)},event:e.event[0],auth:e.isSignedIn,maxGroupSize:Math.min(e.maxGroupSize,e.event[0].openSpots),signupMessage:e.signupMessage})]})),Object(r.jsx)("div",{children:e.created?Object(r.jsx)(Pe,{group:e.group.dbGroup,event:e.event}):t})}));n(324);function Me(){return Math.round(20*Math.random())-10}function Ue(){var e=50+Me(),t=50+Me();return{top:"".concat(e,"%"),left:"".concat(t,"%"),transform:"translate(-".concat(e,"%, -").concat(t,"%)")}}var Fe=Object(P.a)((function(e){return{paper:{position:"absolute",width:400,backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3)}}}));function Ve(){var e=Fe(),t=c.a.useState(Ue),n=Object(ee.a)(t,1)[0],a=c.a.useState(!1),i=Object(ee.a)(a,2),s=i[0],o=i[1],u=Object(r.jsxs)("div",{style:n,className:e.paper,children:[Object(r.jsx)("h2",{id:"simple-modal-title",children:"Text in a modal"}),Object(r.jsx)("p",{id:"simple-modal-description",children:"Duis mollis, est non commodo luctus, nisi erat porttitor ligula."}),Object(r.jsx)(Ve,{})]});return Object(r.jsxs)("div",{children:[Object(r.jsx)("button",{type:"button",onClick:function(){o(!0)},children:"Open Modal"}),Object(r.jsx)(te.a,{open:s,onClose:function(){o(!1)},"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",children:u})]})}var Be=Object(u.b)((function(e,t){return{event:e.event.events}}),{fetchEvent:D,deleteEvent:z})((function(e){Object(a.useEffect)((function(){e.fetchEvent(e.match.params.id)}),[]);return Object(r.jsx)(Ve,{title:"Delete ".concat(e.event.eventName),content:"Are you sure you want to delete this event?"})})),He=(n(325),Object(u.b)((function(e,t){return{event:e.event.events.filter((function(e){return e._id===t.match.params.id})),created:e.event.created}}),{fetchEvent:D,editEvent:function(e,t){return function(){var n=Object(O.a)(h.a.mark((function n(r){var a;return h.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,x.put("event/".concat(e),t);case 2:a=n.sent,r({type:E,payload:a.data});case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}})((function(e){Object(a.useEffect)((function(){e.fetchEvent(e.match.params.id)}),[e.fetchEvent]);var t=e.created?Object(r.jsx)(j.a,{to:"/"}):null,n=Object(r.jsx)("p",{children:"Hello"});if(e.event.length=1){var c=e.event[0];c&&(c.date=new Date(new Date(c.date).toString().split("GMT")[0]+" UTC").toISOString().split(".")[0]),n=Object(r.jsx)(Se,{initialValues:e.event[0],onSubmit:function(t){e.editEvent(e.match.params.id,t)}})}return Object(r.jsxs)("div",{children:[t,Object(r.jsx)("h2",{children:"Event Edit"}),n]})}))),Ze=Object(u.b)((function(e){return{events:e.event.events}}),{fetchUpcomingEvents:A})((function(e){Object(a.useEffect)((function(){e.fetchUpcomingEvents()}),[e.fetchUpcomingEvents]);var t=Object(r.jsx)("div",{children:"Loading..."});return e.events.length>0&&(t=Object(r.jsx)(pe,{events:e.events,admin:!0})),Object(r.jsxs)("div",{children:[Object(r.jsx)("h2",{children:"Reservation List"}),t]})})),We=n(171),Xe=Object(P.a)((function(e){return{paper:{top:"50%",left:"50%",transform:"translate(-50%, -50%)",position:"absolute",width:400,backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3)}}})),qe=function(e){var t=Xe(),n=Object(a.useState)(!1),c=Object(ee.a)(n,2),i=c[0],s=c[1],u=Object(a.useState)(""),l=Object(ee.a)(u,2),d=l[0],j=l[1],b=Object(a.useState)(""),p=Object(ee.a)(b,2),h=p[0],O=p[1],m=Object(a.useState)(""),x=Object(ee.a)(m,2),v=x[0],f=x[1],g=Object(r.jsxs)("div",{className:t.paper,children:[Object(r.jsx)("h2",{children:d}),Object(r.jsx)("p",{children:h}),Object(r.jsx)("div",{children:v})]}),y=function(t,n,a,c){"del"===t&&(j("Delete Group"),O("Are you sure you want to delete this group named: ".concat(a)),f(Object(r.jsxs)("div",{children:[Object(r.jsx)(B.a,{variant:"contained",color:"secondary",onClick:function(){return function(t,n){e.delete(t,n,e.event[0]._id),S()}(n,c)},children:"Delete"}),Object(r.jsx)(B.a,{style:{marginLeft:"1rem"},variant:"contained",onClick:S,children:"Cancel"})]}))),s(!0)},S=function(){s(!1)};return Object(r.jsxs)("div",{children:[Object(r.jsx)(te.a,{open:i,onClose:S,"aria-labelledby":"delete-group-confirmation","aria-describedby":"delete-group-confirm",children:g}),Object(r.jsxs)("h3",{children:["Groups for: ",e.event[0].eventName," -"," ",new Date(e.event[0].date).toLocaleString()]}),Object(r.jsxs)("h4",{children:[e.event[0].groups.length>0?e.event[0].groups.map((function(e){return e.groupSize})).reduce((function(e,t){return e+t}))+" Reservations":null," "]}),Object(r.jsx)(ce.a,{component:oe.a,children:Object(r.jsxs)(ne.a,{"aria-label":"group table",children:[Object(r.jsx)(ie.a,{children:Object(r.jsxs)(se.a,{children:[Object(r.jsx)(ae.a,{children:"Group"}),Object(r.jsx)(ae.a,{align:"right",children:"Quantity"}),Object(r.jsx)(ae.a,{align:"right",children:"Email"}),Object(r.jsx)(ae.a,{align:"right",children:"Note"}),Object(r.jsx)(ae.a,{align:"right",children:"Edit"})]})}),Object(r.jsx)(re.a,{children:e.event[0].groups.map((function(e){return Object(r.jsxs)(se.a,{children:[Object(r.jsx)(ae.a,{component:"th",scope:"row",children:e.groupName}),Object(r.jsx)(ae.a,{align:"right",children:e.groupSize}),Object(r.jsx)(ae.a,{align:"right",children:e.email}),Object(r.jsx)(ae.a,{align:"right",children:e.note}),Object(r.jsxs)(ae.a,{align:"right",children:[Object(r.jsx)(R.a,{component:o.b,to:"/reservations/edit/".concat(e._id),color:"textPrimary",children:Object(r.jsx)(le.a,{fontSize:"small"})}),Object(r.jsx)(R.a,{component:o.b,to:"#",color:"textPrimary",children:Object(r.jsx)(je.a,{style:{marginLeft:5},fontSize:"small",onClick:function(){return y("del",e._id,e.groupName,e.groupSize)}})})]})]},e._id)}))})]})})]})},Je=Object(u.b)((function(e){return{event:e.event.events}}),{fetchPopulatedEvent:function(e){return function(){var t=Object(O.a)(h.a.mark((function t(n){var r;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x.get("event/admin/".concat(e));case 2:r=t.sent,n({type:f,payload:r.data});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},deleteGroup:function(e,t,n){return function(){var r=Object(O.a)(h.a.mark((function r(a){var c;return h.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,x.delete("/group/".concat(e,"/").concat(t,"/").concat(n));case 2:c=r.sent,a({type:G,payload:c.data});case 4:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()}})((function(e){Object(a.useEffect)((function(){e.fetchPopulatedEvent(e.match.params.id)}),[e.fetchEvent]);var t=Object(r.jsx)("div",{children:"Loading..."});if(e.event[0]&&e.event[0].groups){var n=e.event[0].groups.map((function(e){return{groupName:(t=e).groupName,email:t.email,groupSize:t.groupSize};var t}));t=Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(qe,{event:e.event,delete:e.deleteGroup}),Object(r.jsx)("br",{}),Object(r.jsx)(We.CSVLink,{style:{marginTop:"1rem",marginBottom:"20px"},data:n,children:"Export As CSV"}),Object(r.jsx)("br",{}),Object(r.jsx)("br",{}),Object(r.jsx)("br",{})]})}return Object(r.jsxs)("div",{children:[Object(r.jsx)("h2",{children:"Reservations"}),t]})})),$e=Object(u.b)((function(e,t){return{group:e.event.events[0].groups.filter((function(e){return e._id===t.match.params.id})),isSignedIn:e.auth.isSignedIn,eventId:e.event.events[0]._id,created:e.group.created,event:e.event.events[0]}}),{startCreateGroup:L,editGroup:function(e,t){return function(){var n=Object(O.a)(h.a.mark((function n(r){var a;return h.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,x.put("/group/".concat(e),t);case 2:a=n.sent,r({type:C,payload:a.data});case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}})((function(e){Object(a.useEffect)((function(){return function(){return e.startCreateGroup()}}),[]);var t=e.created?Object(r.jsx)(j.a,{to:"/"}):null;return Object(r.jsxs)("div",{children:[t,Object(r.jsx)("h2",{children:"Reservation Edit"}),Object(r.jsx)(De,{initialValues:e.group[0],auth:e.isSignedIn,onSubmit:function(t){var n=e.group[0].groupSize-t.groupSize;t.eventId=e.eventId,t.sizeDifference=n,e.editGroup(e.match.params.id,t)},event:e.event})]})})),Qe=n(392),Ye=n(394),Ke=function(e){var t=e.label,n=e.input,a=e.meta,c=a.touched,i=a.invalid,s=a.error,o=Object(me.a)(e,["label","input","meta"]);return Object(r.jsx)(fe.a,Object(Oe.a)(Object(Oe.a)({label:t,placeholder:t,error:c&&i,helperText:c&&s},n),o))},et=function(e){var t=e.fields,n=e.meta,a=n.touched,c=n.error,i=n.submitFailed,s=e.input;return Object(r.jsxs)(Ye.a,{style:{maxWidth:360,marginTop:"27px",marginBottom:"27px"},children:[t.map((function(e,n){return Object(r.jsxs)("li",{style:{display:"flex",alignItems:"flex-end"},children:[Object(r.jsx)(xe.a,Object(Oe.a)({style:{width:"80%",marginBottom:".5rem"},name:"".concat(e,".adminEmail"),type:"email",component:Ke,label:"Admin Email"},s)),Object(r.jsx)(B.a,{style:{width:"5%",padding:0,minWidth:25,marginBottom:".5rem"},variant:"contained",color:"secondary",onClick:function(){return t.remove(n)},children:"X"})]},n)})),Object(r.jsx)(B.a,{variant:"contained",onClick:function(){return t.push({})},children:"Add Admin Email"}),(a||i)&&c&&Object(r.jsx)("span",{children:c})]})},tt=function(e){var t=e.handleSubmit;return Object(r.jsxs)("form",{onSubmit:t,children:[Object(r.jsx)("div",{children:Object(r.jsx)(xe.a,{name:"maxGroupSize",component:Ke,label:"Max. Group Size",type:"number",inputProps:{min:1}})}),Object(r.jsx)("div",{children:Object(r.jsx)(Qe.a,{name:"adminEmail",component:et})}),Object(r.jsx)("div",{children:Object(r.jsx)(xe.a,{name:"signupMessage",component:Ke,label:"Signup Message",style:{width:"100%"},multiline:!0,rows:13})}),Object(r.jsx)("br",{}),Object(r.jsx)(B.a,{type:"submit",variant:"contained",color:"primary",children:"Submit"})]})},nt=tt=Object(ve.a)({form:"settings",validate:function(e){var t={};return["groupName","email","groupSize"].forEach((function(n){e[n]||(t[n]="Required")})),e.email&&!/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e.email)&&(t.email="Invalid email address"),t}})(tt),rt=Object(u.b)((function(e){return{church:e.church}}),{fetchChurchSettings:function(){return function(){var e=Object(O.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.get("church/admin");case 2:n=e.sent,t({type:T,payload:n.data[0]});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},updateChurchSettings:function(e){return function(){var t=Object(O.a)(h.a.mark((function t(n){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x.put("church/admin",e);case 2:t.sent;case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}})((function(e){c.a.useEffect((function(){e.fetchChurchSettings()}),[]);var t=Object(r.jsx)("div",{children:"Loading..."});return e.church.adminEmail.length>0&&(t=Object(r.jsx)(nt,{initialValues:e.church,onSubmit:function(t){e.updateChurchSettings(t)}})),Object(r.jsxs)("div",{children:[Object(r.jsx)("h2",{children:"Church Settings"}),t]})})),at=Object(j.g)(Object(u.b)((function(e){return{isAuthenticated:e.auth.isSignedIn,maxGroupSize:e.church.maxGroupSize}}),{fetchMaxGroupSize:function(){return function(){var e=Object(O.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.get("/church");case 2:n=e.sent,t({type:_,payload:n.data});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}})((function(e){Object(a.useEffect)((function(){e.fetchMaxGroupSize()}),[]);var t=Object(r.jsxs)(j.d,{children:[Object(r.jsx)(j.b,{path:"/",exact:!0,component:he}),Object(r.jsx)(j.b,{path:"/reserve/:id",exact:!0,component:Re}),Object(r.jsx)(j.b,{path:"/embed/reserve/:id",exact:!0,component:Re})]});return e.isAuthenticated&&(t=Object(r.jsxs)(j.d,{children:[Object(r.jsx)(j.b,{path:"/",exact:!0,render:function(e){return Object(r.jsx)(he,{isAuth:!0})}}),Object(r.jsx)(j.b,{path:"/event-create",component:Ee}),Object(r.jsx)(j.b,{path:"/events/edit/:id",component:He}),Object(r.jsx)(j.b,{path:"/events/delete/:id",component:Be}),Object(r.jsx)(j.b,{path:"/reservations",exact:!0,component:Ze}),Object(r.jsx)(j.b,{path:"/reservations/:id",exact:!0,component:Je}),Object(r.jsx)(j.b,{path:"/reservations/edit/:id",exact:!0,component:$e}),Object(r.jsx)(j.b,{path:"/reserve/:id",exact:!0,component:Re}),Object(r.jsx)(j.b,{path:"/embed/reserve/:id",exact:!0,component:Re}),Object(r.jsx)(j.b,{path:"/settings",exact:!0,component:rt})]})),Object(r.jsxs)("div",{children:[Object(r.jsx)(b.a,{}),Object(r.jsx)(K,{children:t})]})}))),ct=n(393),it={maxGroupSize:null,adminEmail:[],adminFirstName:"",adminLastName:"",signupMessage:""},st=n(173),ot={events:[],created:!1},ut=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ot,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f:return Object(Oe.a)(Object(Oe.a)({},e),{},{events:t.payload,created:!1});case g:return e.events.length?Object(Oe.a)(Object(Oe.a)({},e),{},{events:e.events.map((function(e){return e._id===t.payload._id?e=t.payload:e}))}):Object(Oe.a)(Object(Oe.a)({},e),{},{events:e.events.concat(t.payload)});case v:return Object(Oe.a)(Object(Oe.a)({},e),{},{events:[].concat(Object(st.a)(e.events),[t.payload]),created:!0});case y:return Object(Oe.a)(Object(Oe.a)({},e),{},{events:t.payload});case S:return Object(Oe.a)(Object(Oe.a)({},e),{},{events:e.events.filter((function(e){return e._id!==t.payload}))});case E:return Object(Oe.a)(Object(Oe.a)({},e),{},{created:!0,events:e.events.filter((function(e){return e._id!==t.payload}))});case G:return Object(Oe.a)(Object(Oe.a)({},e),{},{events:[t.payload.dbEvent]});default:return e}},lt={created:!1},dt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:lt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case N:return Object(Oe.a)(Object(Oe.a)({},e),{},{created:!1});case w:return Object(Oe.a)(Object(Oe.a)({},e),{},{group:t.payload,created:!0});case C:return Object(Oe.a)(Object(Oe.a)({},e),{},{created:!0});case G:return Object(Oe.a)({},e);default:return e}},jt={isSignedIn:!0,userId:{adminOf:[]}},bt=Object(l.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:jt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case k:return Object(Oe.a)(Object(Oe.a)({},e),{},{isSignedIn:!0,userId:t.payload});case I:return Object(Oe.a)(Object(Oe.a)({},e),{},{isSignedIn:!0,userId:jt.userId});default:return e}},church:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:it,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case _:return Object(Oe.a)(Object(Oe.a)({},e),{},{maxGroupSize:t.payload[0].maxGroupSize,signupMessage:t.payload[0].signupMessage});case T:return Object(Oe.a)(Object(Oe.a)({},e),{},{adminEmail:t.payload.adminEmail,adminFirstName:t.payload.adminFirstName,adminLastName:t.payload.adminLastName,maxGroupSize:t.payload.maxGroupSize,signupMessage:t.payload.signupMessage});default:return e}},event:ut,group:dt,form:ct.a}),pt=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||l.d,ht=Object(l.e)(bt,pt(Object(l.a)(d.a)));s.a.render(Object(r.jsx)(u.a,{store:ht,children:Object(r.jsx)(o.a,{children:Object(r.jsx)(at,{})})}),document.querySelector("#root"))}},[[329,1,2]]]);
//# sourceMappingURL=main.78e69a29.chunk.js.map