(this.webpackJsonpmern=this.webpackJsonpmern||[]).push([[0],{329:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n(0),c=n.n(r),i=n(17),o=n.n(i),s=n(19),l=n(13),u=n(18),d=n(163),j=n(21),b=n(386),p=n(15),h=n.n(p),O=n(28),m=n(164),x=n.n(m).a.create({baseURL:"/"}),v="CREATE_EVENT",f="FETCH_EVENTS",g="FETCH_EVENT",y="FETCH_POPULATED_EVENT",S="DELETE_EVENT",E="EDIT_EVENT",w="CREATE_GROUP",C="EDIT_GROUP",G="DELETE_GROUP",I="CREATE_GROUP_START",k="SIGN_IN",N="SIGN_OUT",T="FETCH_MAX_GROUP_SIZE",_="FETCH_CHURCH_SETTINGS",A=function(){return function(){var e=Object(O.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.get("/event");case 2:n=e.sent,t({type:f,payload:n.data});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},D=function(e){return function(){var t=Object(O.a)(h.a.mark((function t(n){var a;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x.get("/event/".concat(e));case 2:a=t.sent,n({type:g,payload:a.data});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},z=function(e){return function(){var t=Object(O.a)(h.a.mark((function t(n){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x.delete("event/".concat(e));case 2:t.sent,n({type:S,payload:e});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},R=function(){return{type:I}},L=n(370),M=n(373),P=n(165),U=n(166),F=n(174),V=n(172),B=n(366),Z=n(167),H=n.n(Z),W=function(e){Object(F.a)(n,e);var t=Object(V.a)(n);function n(){var e;Object(P.a)(this,n);for(var r=arguments.length,c=new Array(r),i=0;i<r;i++)c[i]=arguments[i];return(e=t.call.apply(t,[this].concat(c))).onAuthChange=function(t){if(t){var n=e.auth.currentUser.get().getId(),a=e.auth.currentUser.get().getBasicProfile().getName(),r=e.auth.currentUser.get().getBasicProfile().getGivenName(),c=e.auth.currentUser.get().getBasicProfile().getFamilyName(),i=e.auth.currentUser.get().getBasicProfile().getImageUrl(),o=e.auth.currentUser.get().getBasicProfile().getEmail();e.props.signIn({id:n,fullName:a,givenName:r,familyName:c,imageUrl:i,email:o})}else e.props.signOut()},e.onSignInClick=function(){e.auth.signIn()},e.onSignOutClick=function(){e.auth.signOut()},e.adminRedirect=e.props.isAdmin?Object(a.jsx)(j.a,{to:"/admin"}):null,e}return Object(U.a)(n,[{key:"componentDidMount",value:function(){var e=this;window.gapi.load("client:auth2",(function(){window.gapi.client.init({clientId:"666797596660-g0ss4568pfnjesar12r2n0irheeg92n1.apps.googleusercontent.com",scope:"email"}).then((function(){e.auth=window.gapi.auth2.getAuthInstance(),e.onAuthChange(e.auth.isSignedIn.get()),e.auth.isSignedIn.listen(e.onAuthChange)}))}))}},{key:"renderAuthButton",value:function(){return null===this.props.isSignedIn?null:this.props.isSignedIn?Object(a.jsxs)("div",{style:{display:"flex"},children:[Object(a.jsx)(B.a,{component:s.b,to:"/event-create",color:"inherit",children:"Create Event"}),Object(a.jsx)(B.a,{color:"inherit",component:s.b,to:"/settings",children:Object(a.jsx)(H.a,{})}),Object(a.jsx)("div",{onClick:this.onSignOutClick,children:Object(a.jsx)(B.a,{color:"inherit",children:"Sign Out"})})]}):Object(a.jsx)("div",{onClick:this.onSignInClick,children:Object(a.jsx)(B.a,{color:"inherit",children:"Admin"})})}},{key:"render",value:function(){return Object(a.jsxs)("div",{children:[this.adminRedirect,this.renderAuthButton()]})}}]),n}(c.a.Component),X=Object(l.b)((function(e){return{isSignedIn:e.auth.isSignedIn}}),{signIn:function(e){return function(){var t=Object(O.a)(h.a.mark((function t(n){var a;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x.post("/user",e);case 2:(a=t.sent).data.email?n({type:k,payload:a.data}):(console.log("RES REAL: ",a.data.errorMessage),alert(a.data.errorMessage),n({type:N,payload:a.data}));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},signOut:function(){return{type:N}}})(W),q=n(176),J=n(372),$=n(374),Q=n(371),Y=Object(L.a)((function(e){return{root:{flexGrow:1,marginBottom:"2rem"},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1}}})),K=function(e){var t=Y(),n=Object(a.jsx)("div",{className:t.root,children:Object(a.jsx)(Q.a,{style:{margin:0},position:"static",children:Object(a.jsxs)(J.a,{children:[Object(a.jsx)(q.a,{variant:"h6",className:t.title,children:Object(a.jsxs)(M.a,{component:s.b,style:{color:"#fff",textDecoration:"none"},to:"/",children:[Object(a.jsx)("strong",{children:"SeatSave"})," | San Pedro Presbyterian Church"]})}),Object(a.jsx)(X,{})]})})});return window.location.pathname.startsWith("/embed")&&(n=Object(a.jsx)("div",{})),Object(a.jsxs)(a.Fragment,{children:[n,Object(a.jsx)($.a,{maxWidth:"md",children:Object(a.jsx)("main",{children:e.children})})]})},ee=n(31),te=n(391),ne=n(376),ae=n(380),re=n(379),ce=n(375),ie=n(377),oe=n(378),se=n(331),le=n(99),ue=n.n(le),de=n(100),je=n.n(de),be=Object(L.a)((function(e){return{paper:{top:"50%",left:"50%",transform:"translate(-50%, -50%)",position:"absolute",width:400,backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3)}}})),pe=function(e){var t=be(),n=Object(r.useState)(!1),c=Object(ee.a)(n,2),i=c[0],o=c[1],l=Object(r.useState)(""),u=Object(ee.a)(l,2),d=u[0],j=u[1],b=Object(r.useState)(""),p=Object(ee.a)(b,2),h=p[0],O=p[1],m=Object(r.useState)(""),x=Object(ee.a)(m,2),v=x[0],f=x[1],g=Object(a.jsxs)("div",{className:t.paper,children:[Object(a.jsx)("h2",{children:d}),Object(a.jsx)("p",{children:h}),Object(a.jsx)("div",{children:v})]}),y=function(t,n,r){"del"===t&&(j("Delete Event"),O("Are you sure you want to delete this event named: ".concat(r)),f(Object(a.jsxs)("div",{children:[Object(a.jsx)(B.a,{variant:"contained",color:"secondary",onClick:function(){return function(t){e.delete(t),S()}(n)},children:"Delete"}),Object(a.jsx)(B.a,{style:{marginLeft:"1rem"},variant:"contained",onClick:S,children:"Cancel"})]}))),o(!0)},S=function(){o(!1)};return Object(a.jsxs)(ce.a,{component:se.a,children:[Object(a.jsx)(te.a,{open:i,onClose:S,"aria-labelledby":"delete-event-confirmation","aria-describedby":"delete-event-confirm",children:g}),Object(a.jsxs)(ne.a,{"aria-label":"event table",children:[Object(a.jsx)(ie.a,{children:Object(a.jsxs)(oe.a,{children:[Object(a.jsx)(re.a,{}),Object(a.jsx)(re.a,{children:"Event"}),Object(a.jsx)(re.a,{align:"right",children:"Day"}),Object(a.jsx)(re.a,{align:"right",children:"Date"}),Object(a.jsx)(re.a,{align:"right",children:"Time"}),Object(a.jsx)(re.a,{align:"right",children:"Open Spots"}),e.isAuth?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(re.a,{align:"right",children:"Admin"}),Object(a.jsx)(re.a,{align:"right",children:"Groups"})]}):null]})}),Object(a.jsx)(ae.a,{children:e.events.map((function(t){return Object(a.jsxs)(oe.a,{children:[Object(a.jsx)(re.a,{component:"th",scope:"row",children:Object(a.jsx)(M.a,{component:s.b,to:"/reserve/".concat(t._id),children:Object(a.jsx)(B.a,{variant:"contained",color:"primary",children:"Reserve"})})}),Object(a.jsx)(re.a,{children:t.eventName}),Object(a.jsx)(re.a,{align:"right",children:new Date(t.date).toLocaleDateString("us-en",{weekday:"short"})}),Object(a.jsx)(re.a,{align:"right",children:new Date(t.date).toLocaleDateString()}),Object(a.jsx)(re.a,{align:"right",children:new Date(t.date).toLocaleTimeString([],{timeStyle:"short",timeZone:"UTC"})}),Object(a.jsx)(re.a,{align:"right",children:t.openSpots}),e.isAuth?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)(re.a,{align:"right",children:[" ",Object(a.jsx)(M.a,{component:s.b,to:"/events/edit/".concat(t._id),color:"textPrimary",children:Object(a.jsx)(ue.a,{fontSize:"small"})}),Object(a.jsx)(M.a,{component:s.b,to:"#",color:"textPrimary",children:Object(a.jsx)(je.a,{style:{marginLeft:5},fontSize:"small",onClick:function(){return y("del",t._id,t.eventName)}})})]}),Object(a.jsx)(re.a,{align:"right",children:Object(a.jsx)(M.a,{component:s.b,to:"/reservations/".concat(t._id),children:"View"})})]}):null]},t._id)}))})]})]})},he=Object(l.b)((function(e){return{events:e.event}}),{fetchUpcomingEvents:A,deleteEvent:z})((function(e){Object(r.useEffect)((function(){e.fetchUpcomingEvents()}),[e.fetchUpcomingEvents]);var t=Object(a.jsx)("div",{children:"Loading..."});return e.events.events.length&&(t=Object(a.jsx)(pe,{events:e.events.events,isAuth:e.isAuth,delete:e.deleteEvent})),Object(a.jsxs)("div",{children:[Object(a.jsx)("h2",{children:"Event List"}),t,Object(a.jsx)("br",{}),Object(a.jsx)("br",{})]})})),Oe=n(8),me=n(48),xe=n(389),ve=n(388),fe=n(387),ge=function(e){var t=e.label,n=e.input,r=e.meta,c=r.touched,i=r.invalid,o=r.error,s=Object(me.a)(e,["label","input","meta"]);return Object(a.jsx)(fe.a,Object(Oe.a)(Object(Oe.a)({label:t,placeholder:t,error:c&&i,helperText:c&&o},n),s))},ye=function(e){var t=e.label,n=e.input,r=e.meta,c=(r.touched,r.invalid,r.error,Object(me.a)(e,["label","input","meta"]));return Object(a.jsx)(fe.a,Object(Oe.a)(Object(Oe.a)({id:"datetime-local",label:t,type:"datetime-local",InputLabelProps:{shrink:!0}},n),c))},Se=Object(ve.a)({form:"event"})((function(e){var t=e.handleSubmit;e.pristine,e.reset,e.submitting,e.classes;return Object(a.jsxs)("form",{onSubmit:t,children:[Object(a.jsx)("div",{children:Object(a.jsx)(xe.a,{name:"eventName",component:ge,label:"Event Name"})}),Object(a.jsx)("br",{}),Object(a.jsx)("div",{children:Object(a.jsx)(xe.a,{name:"date",component:ye,label:"Event Date & Time"})}),Object(a.jsx)("br",{}),Object(a.jsx)("div",{children:Object(a.jsx)(xe.a,{name:"openSpots",component:ge,type:"number",label:"Open Spots",inputProps:{min:0}})}),Object(a.jsx)("br",{}),Object(a.jsx)("br",{}),Object(a.jsx)(B.a,{type:"submit",variant:"contained",color:"primary",children:"Submit"})]})})),Ee=Object(l.b)((function(e){return{created:e.event.created}}),{createEvent:function(e){return function(){var t=Object(O.a)(h.a.mark((function t(n){var a;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x.post("/event",e);case 2:a=t.sent,n({type:v,payload:a.data});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},startCreateGroup:R})((function(e){Object(r.useEffect)((function(){e.startCreateGroup()}),[e.startCreateGroup]);var t=e.created?Object(a.jsx)(j.a,{to:"/"}):null;return Object(a.jsxs)(c.a.Fragment,{children:[t,Object(a.jsx)("h2",{children:"Create An Event:"}),Object(a.jsx)(Se,{onSubmit:function(t){e.createEvent(t)}}),Object(a.jsx)("br",{}),Object(a.jsx)("br",{}),Object(a.jsx)("br",{})]})})),we=n(382),Ce=n(390),Ge=n(381),Ie=n(385),ke=n(384),Ne=n(383),Te=function(e){var t=e.label,n=e.input,r=e.meta,c=r.touched,i=r.invalid,o=r.error,s=Object(me.a)(e,["label","input","meta"]);return Object(a.jsx)(fe.a,Object(Oe.a)(Object(Oe.a)({label:t,placeholder:t,error:c&&i,helperText:c&&o},n),s))},_e=function(e){var t=e.label,n=e.input,r=e.meta,c=r.touched,i=r.invalid,o=r.error,s=Object(me.a)(e,["label","input","meta"]);return Object(a.jsxs)(Ge.a,{error:c&&i,component:"fieldset",children:[console.log("ERR: ",o),Object(a.jsx)(ke.a,{children:Object(a.jsx)(Ie.a,{control:Object(a.jsx)(Ce.a,Object(Oe.a)(Object(Oe.a)({checked:!!n.value,onChange:n.onChange},s),n)),label:t})}),Object(a.jsx)(Ne.a,{children:c&&o})]})},Ae=function(e){var t=e.handleSubmit;return Object(a.jsxs)("form",{onSubmit:t,children:[Object(a.jsx)("div",{children:Object(a.jsx)(xe.a,{name:"groupName",component:Te,label:"Group Name"})}),Object(a.jsx)("div",{children:Object(a.jsx)(xe.a,{name:"email",component:Te,type:"email",label:"Email",style:{width:"300px"}})}),Object(a.jsx)("div",{children:Object(a.jsx)(xe.a,{name:"groupSize",component:Te,type:"number",label:"How Many People in Your Group?",inputProps:{min:1,max:e.maxGroupSize},style:{width:"300px"}})}),e.auth?Object(a.jsx)("div",{children:Object(a.jsx)(xe.a,{name:"note",component:Te,label:"Note"})}):null,Object(a.jsx)("br",{}),Object(a.jsxs)("div",{style:{marginTop:"1rem"},children:[Object(a.jsx)(we.a,{children:"Please read and check all that apply"}),Object(a.jsx)("br",{}),Object(a.jsx)(xe.a,{name:"noSymptoms",component:_e,label:"I do not have any COVID-19 symptoms"}),Object(a.jsx)(xe.a,{name:"noContact",component:_e,label:"I have not been in contact with anyone who has recently contracted the coronavirus"}),Object(a.jsx)(xe.a,{name:"willDistance",component:_e,label:"I will always maintain a minimum 6-feet distance from anyone that I do not live with"}),Object(a.jsx)(xe.a,{name:"willMask",component:_e,label:"I will wear a properly fitting mask over my nose and mouth at all times"}),Object(a.jsx)(xe.a,{name:"noSocial",component:_e,label:"I understand this is a worship opportunity, not a social event, and when ended, I will proceed to my car while wearing my mask"}),Object(a.jsx)(xe.a,{name:"partyResponsible",component:_e,label:"I accept responsibility that all people in my party will follow these guidelines"})]}),Object(a.jsx)("p",{children:e.signupMessage}),Object(a.jsx)(B.a,{type:"submit",variant:"contained",color:"primary",children:"Submit"}),e.auth&&!window.location.pathname.startsWith("/embed")?Object(a.jsxs)("div",{style:{marginTop:"2rem",width:"80%",padding:8},children:[Object(a.jsx)("div",{children:Object(a.jsx)("strong",{children:"Form Embed Code:"})}),Object(a.jsxs)("div",{style:{backgroundColor:"#eee",padding:8},children:['<iframe src="',window.location.origin,"/embed/reserve/",e.event._id,'" title="Event Registration Form" width="100%" height="700px" style="padding:30px; border:none;"></iframe>']})]}):null]})},De=Ae=Object(ve.a)({form:"reserve",validate:function(e){console.log("VALUES ",e);var t={};return["groupName","email","groupSize","noSymptoms","noContact","willDistance","willMask","noSocial","partyResponsible"].forEach((function(n){e[n]||(t[n]="Required")})),e.email&&!/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e.email)&&(t.email="Invalid email address"),t}})(Ae),ze=n(170),Re=n.n(ze),Le=function(e){return Object(a.jsxs)("div",{children:[Object(a.jsx)("h3",{children:"Reservation Confirmation"}),console.log("GROUP: ",e.group),console.log("EVENT: ",e.event[0]),Object(a.jsxs)("div",{children:[Object(a.jsx)("strong",{children:"Group Name: "}),e.group.groupName," ",Object(a.jsx)("br",{}),Object(a.jsx)("strong",{children:"Group Size: "}),e.group.groupSize," ",Object(a.jsx)("br",{}),Object(a.jsx)("strong",{children:"Email: "}),e.group.email," ",Object(a.jsx)("br",{}),Object(a.jsx)("strong",{children:"Event Name: "}),e.event[0].eventName," ",Object(a.jsx)("br",{}),Object(a.jsx)("strong",{children:"Event Date: "}),new Date(e.event[0].date).toLocaleDateString("en-us")," ",Object(a.jsx)("br",{}),Object(a.jsx)("strong",{children:"Event Time: "}),new Date(e.event[0].date).toLocaleTimeString("en-us",{timeStyle:"short",timeZone:"GMT"})," ",Object(a.jsx)("br",{}),Object(a.jsx)("br",{}),Object(a.jsxs)("strong",{children:["Time Reservation Made:"," ",(new Date).toLocaleString("en-us",{dateStyle:"short",timeStyle:"short"})]}),Object(a.jsx)("br",{}),Object(a.jsx)("br",{}),Object(a.jsx)("hr",{}),Object(a.jsx)("br",{}),Object(a.jsx)("div",{children:"The above details have been sent to you."}),Object(a.jsx)("br",{}),Object(a.jsxs)(B.a,{variant:"contained",color:"primary",onClick:function(){return window.print()},children:[Object(a.jsx)(Re.a,{}),"Print"]})]})]})},Me=Object(l.b)((function(e,t){return{event:e.event.events.filter((function(e){return e._id===t.match.params.id})),created:e.group.created,group:e.group.group,isSignedIn:e.auth.isSignedIn,maxGroupSize:e.church.maxGroupSize,signupMessage:e.church.signupMessage}}),{fetchEvent:D,createGroup:function(e,t){return function(){var n=Object(O.a)(h.a.mark((function n(a){var r;return h.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,x.post("/group/".concat(e),t);case 2:r=n.sent,a({type:w,payload:r.data});case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},startCreateGroup:R})((function(e){Object(r.useEffect)((function(){return e.fetchEvent(e.match.params.id),function(){return e.startCreateGroup()}}),[e.fetchEvent]);var t=Object(a.jsx)("div",{children:"Loading ..."});return e.event.length>0&&(t=Object(a.jsxs)("div",{style:{paddingBottom:"1rem"},children:[Object(a.jsx)("h2",{children:"RSVP"}),Object(a.jsxs)("h4",{children:[e.event[0].eventName," -"," ",new Date(e.event[0].date).toLocaleDateString("us-en",{weekday:"short"}),", ",new Date(e.event[0].date).toLocaleString("en-us",{dateStyle:"short",timeStyle:"short",timeZone:"GMT"})]}),Object(a.jsx)(De,{onSubmit:function(t){e.createGroup(e.match.params.id,t)},event:e.event[0],auth:e.isSignedIn,maxGroupSize:Math.min(e.maxGroupSize,e.event[0].openSpots),signupMessage:e.signupMessage})]})),Object(a.jsx)("div",{children:e.created?Object(a.jsx)(Le,{group:e.group.dbGroup,event:e.event}):t})}));n(324);function Pe(){return Math.round(20*Math.random())-10}function Ue(){var e=50+Pe(),t=50+Pe();return{top:"".concat(e,"%"),left:"".concat(t,"%"),transform:"translate(-".concat(e,"%, -").concat(t,"%)")}}var Fe=Object(L.a)((function(e){return{paper:{position:"absolute",width:400,backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3)}}}));function Ve(){var e=Fe(),t=c.a.useState(Ue),n=Object(ee.a)(t,1)[0],r=c.a.useState(!1),i=Object(ee.a)(r,2),o=i[0],s=i[1],l=Object(a.jsxs)("div",{style:n,className:e.paper,children:[Object(a.jsx)("h2",{id:"simple-modal-title",children:"Text in a modal"}),Object(a.jsx)("p",{id:"simple-modal-description",children:"Duis mollis, est non commodo luctus, nisi erat porttitor ligula."}),Object(a.jsx)(Ve,{})]});return Object(a.jsxs)("div",{children:[Object(a.jsx)("button",{type:"button",onClick:function(){s(!0)},children:"Open Modal"}),Object(a.jsx)(te.a,{open:o,onClose:function(){s(!1)},"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",children:l})]})}var Be=Object(l.b)((function(e,t){return{event:e.event.events}}),{fetchEvent:D,deleteEvent:z})((function(e){Object(r.useEffect)((function(){e.fetchEvent(e.match.params.id)}),[]);return Object(a.jsx)(Ve,{title:"Delete ".concat(e.event.eventName),content:"Are you sure you want to delete this event?"})})),Ze=(n(325),Object(l.b)((function(e,t){return{event:e.event.events.filter((function(e){return e._id===t.match.params.id})),created:e.event.created}}),{fetchEvent:D,editEvent:function(e,t){return function(){var n=Object(O.a)(h.a.mark((function n(a){var r;return h.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,x.put("event/".concat(e),t);case 2:r=n.sent,a({type:E,payload:r.data});case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}})((function(e){Object(r.useEffect)((function(){e.fetchEvent(e.match.params.id)}),[e.fetchEvent]);var t=e.created?Object(a.jsx)(j.a,{to:"/"}):null,n=Object(a.jsx)("p",{children:"Hello"});if(e.event.length=1){var c=e.event[0];c&&(c.date=new Date(new Date(c.date).toString().split("GMT")[0]+" UTC").toISOString().split(".")[0]),n=Object(a.jsx)(Se,{initialValues:e.event[0],onSubmit:function(t){e.editEvent(e.match.params.id,t)}})}return Object(a.jsxs)("div",{children:[t,Object(a.jsx)("h2",{children:"Event Edit"}),n]})}))),He=Object(l.b)((function(e){return{events:e.event.events}}),{fetchUpcomingEvents:A})((function(e){Object(r.useEffect)((function(){e.fetchUpcomingEvents()}),[e.fetchUpcomingEvents]);var t=Object(a.jsx)("div",{children:"Loading..."});return e.events.length>0&&(t=Object(a.jsx)(pe,{events:e.events,admin:!0})),Object(a.jsxs)("div",{children:[Object(a.jsx)("h2",{children:"Reservation List"}),t]})})),We=n(171),Xe=Object(L.a)((function(e){return{paper:{top:"50%",left:"50%",transform:"translate(-50%, -50%)",position:"absolute",width:400,backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3)}}})),qe=function(e){var t=Xe(),n=Object(r.useState)(!1),c=Object(ee.a)(n,2),i=c[0],o=c[1],l=Object(r.useState)(""),u=Object(ee.a)(l,2),d=u[0],j=u[1],b=Object(r.useState)(""),p=Object(ee.a)(b,2),h=p[0],O=p[1],m=Object(r.useState)(""),x=Object(ee.a)(m,2),v=x[0],f=x[1],g=Object(a.jsxs)("div",{className:t.paper,children:[Object(a.jsx)("h2",{children:d}),Object(a.jsx)("p",{children:h}),Object(a.jsx)("div",{children:v})]}),y=function(t,n,r,c){"del"===t&&(j("Delete Group"),O("Are you sure you want to delete this group named: ".concat(r)),f(Object(a.jsxs)("div",{children:[Object(a.jsx)(B.a,{variant:"contained",color:"secondary",onClick:function(){return function(t,n){e.delete(t,n,e.event[0]._id),S()}(n,c)},children:"Delete"}),Object(a.jsx)(B.a,{style:{marginLeft:"1rem"},variant:"contained",onClick:S,children:"Cancel"})]}))),o(!0)},S=function(){o(!1)};return Object(a.jsxs)("div",{children:[Object(a.jsx)(te.a,{open:i,onClose:S,"aria-labelledby":"delete-group-confirmation","aria-describedby":"delete-group-confirm",children:g}),Object(a.jsxs)("h3",{children:["Groups for: ",e.event[0].eventName," -"," ",new Date(e.event[0].date).toLocaleString("en-US",{timeZone:"GMT"})]}),Object(a.jsxs)("h4",{children:[e.event[0].groups.length>0?e.event[0].groups.map((function(e){return e.groupSize})).reduce((function(e,t){return e+t}))+" Reservations":null," "]}),Object(a.jsx)(ce.a,{component:se.a,children:Object(a.jsxs)(ne.a,{"aria-label":"group table",children:[Object(a.jsx)(ie.a,{children:Object(a.jsxs)(oe.a,{children:[Object(a.jsx)(re.a,{children:"Group"}),Object(a.jsx)(re.a,{align:"right",children:"Quantity"}),Object(a.jsx)(re.a,{align:"right",children:"Email"}),Object(a.jsx)(re.a,{align:"right",children:"Note"}),Object(a.jsx)(re.a,{align:"right",children:"Edit"})]})}),Object(a.jsx)(ae.a,{children:e.event[0].groups.map((function(e){return Object(a.jsxs)(oe.a,{children:[Object(a.jsx)(re.a,{component:"th",scope:"row",children:e.groupName}),Object(a.jsx)(re.a,{align:"right",children:e.groupSize}),Object(a.jsx)(re.a,{align:"right",children:e.email}),Object(a.jsx)(re.a,{align:"right",children:e.note}),Object(a.jsxs)(re.a,{align:"right",children:[Object(a.jsx)(M.a,{component:s.b,to:"/reservations/edit/".concat(e._id),color:"textPrimary",children:Object(a.jsx)(ue.a,{fontSize:"small"})}),Object(a.jsx)(M.a,{component:s.b,to:"#",color:"textPrimary",children:Object(a.jsx)(je.a,{style:{marginLeft:5},fontSize:"small",onClick:function(){return y("del",e._id,e.groupName,e.groupSize)}})})]})]},e._id)}))})]})})]})},Je=Object(l.b)((function(e){return{event:e.event.events}}),{fetchPopulatedEvent:function(e){return function(){var t=Object(O.a)(h.a.mark((function t(n){var a;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x.get("event/admin/".concat(e));case 2:a=t.sent,n({type:f,payload:a.data});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},deleteGroup:function(e,t,n){return function(){var a=Object(O.a)(h.a.mark((function a(r){var c;return h.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,x.delete("/group/".concat(e,"/").concat(t,"/").concat(n));case 2:c=a.sent,r({type:G,payload:c.data});case 4:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}})((function(e){Object(r.useEffect)((function(){e.fetchPopulatedEvent(e.match.params.id)}),[e.fetchEvent]);var t=Object(a.jsx)("div",{children:"Loading..."});if(e.event[0]&&e.event[0].groups){var n=e.event[0].groups.map((function(e){return{groupName:(t=e).groupName,email:t.email,groupSize:t.groupSize};var t}));t=Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(qe,{event:e.event,delete:e.deleteGroup}),Object(a.jsx)("br",{}),Object(a.jsx)(We.CSVLink,{style:{marginTop:"1rem",marginBottom:"20px"},data:n,children:"Export As CSV"}),Object(a.jsx)("br",{}),Object(a.jsx)("br",{}),Object(a.jsx)("br",{})]})}return Object(a.jsxs)("div",{children:[Object(a.jsx)("h2",{children:"Reservations"}),t]})})),$e=Object(l.b)((function(e,t){return{group:e.event.events[0].groups.filter((function(e){return e._id===t.match.params.id})),isSignedIn:e.auth.isSignedIn,eventId:e.event.events[0]._id,created:e.group.created,event:e.event.events[0]}}),{startCreateGroup:R,editGroup:function(e,t){return function(){var n=Object(O.a)(h.a.mark((function n(a){var r;return h.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,x.put("/group/".concat(e),t);case 2:r=n.sent,a({type:C,payload:r.data});case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}})((function(e){Object(r.useEffect)((function(){return function(){return e.startCreateGroup()}}),[]);var t=e.created?Object(a.jsx)(j.a,{to:"/"}):null;return Object(a.jsxs)("div",{children:[t,Object(a.jsx)("h2",{children:"Reservation Edit"}),Object(a.jsx)(De,{initialValues:e.group[0],auth:e.isSignedIn,onSubmit:function(t){var n=e.group[0].groupSize-t.groupSize;t.eventId=e.eventId,t.sizeDifference=n,e.editGroup(e.match.params.id,t)},event:e.event})]})})),Qe=n(392),Ye=n(394),Ke=function(e){var t=e.label,n=e.input,r=e.meta,c=r.touched,i=r.invalid,o=r.error,s=Object(me.a)(e,["label","input","meta"]);return Object(a.jsx)(fe.a,Object(Oe.a)(Object(Oe.a)({label:t,placeholder:t,error:c&&i,helperText:c&&o},n),s))},et=function(e){var t=e.fields,n=e.meta,r=n.touched,c=n.error,i=n.submitFailed,o=e.input;return Object(a.jsxs)(Ye.a,{style:{maxWidth:360,marginTop:"27px",marginBottom:"27px"},children:[t.map((function(e,n){return Object(a.jsxs)("li",{style:{display:"flex",alignItems:"flex-end"},children:[Object(a.jsx)(xe.a,Object(Oe.a)({style:{width:"80%",marginBottom:".5rem"},name:"".concat(e,".adminEmail"),type:"email",component:Ke,label:"Admin Email"},o)),Object(a.jsx)(B.a,{style:{width:"5%",padding:0,minWidth:25,marginBottom:".5rem"},variant:"contained",color:"secondary",onClick:function(){return t.remove(n)},children:"X"})]},n)})),Object(a.jsx)(B.a,{variant:"contained",onClick:function(){return t.push({})},children:"Add Admin Email"}),(r||i)&&c&&Object(a.jsx)("span",{children:c})]})},tt=function(e){var t=e.handleSubmit;return Object(a.jsxs)("form",{onSubmit:t,children:[Object(a.jsx)("div",{children:Object(a.jsx)(xe.a,{name:"maxGroupSize",component:Ke,label:"Max. Group Size",type:"number",inputProps:{min:1}})}),Object(a.jsx)("div",{children:Object(a.jsx)(Qe.a,{name:"adminEmail",component:et})}),Object(a.jsx)("div",{children:Object(a.jsx)(xe.a,{name:"signupMessage",component:Ke,label:"Signup Message",style:{width:"100%"},multiline:!0,rows:13})}),Object(a.jsx)("br",{}),Object(a.jsx)(B.a,{type:"submit",variant:"contained",color:"primary",children:"Submit"})]})},nt=tt=Object(ve.a)({form:"settings",validate:function(e){var t={};return["groupName","email","groupSize"].forEach((function(n){e[n]||(t[n]="Required")})),e.email&&!/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e.email)&&(t.email="Invalid email address"),t}})(tt),at=Object(l.b)((function(e){return{church:e.church}}),{fetchChurchSettings:function(){return function(){var e=Object(O.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.get("church/admin");case 2:n=e.sent,t({type:_,payload:n.data[0]});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},updateChurchSettings:function(e){return function(){var t=Object(O.a)(h.a.mark((function t(n){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x.put("church/admin",e);case 2:t.sent;case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}})((function(e){c.a.useEffect((function(){e.fetchChurchSettings()}),[]);var t=Object(a.jsx)("div",{children:"Loading..."});return e.church.adminEmail.length>0&&(t=Object(a.jsx)(nt,{initialValues:e.church,onSubmit:function(t){e.updateChurchSettings(t)}})),Object(a.jsxs)("div",{children:[Object(a.jsx)("h2",{children:"Church Settings"}),t]})})),rt=Object(j.g)(Object(l.b)((function(e){return{isAuthenticated:e.auth.isSignedIn,maxGroupSize:e.church.maxGroupSize}}),{fetchMaxGroupSize:function(){return function(){var e=Object(O.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.get("/church");case 2:n=e.sent,t({type:T,payload:n.data});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}})((function(e){Object(r.useEffect)((function(){e.fetchMaxGroupSize()}),[]);var t=Object(a.jsxs)(j.d,{children:[Object(a.jsx)(j.b,{path:"/",exact:!0,component:he}),Object(a.jsx)(j.b,{path:"/reserve/:id",exact:!0,component:Me}),Object(a.jsx)(j.b,{path:"/embed/reserve/:id",exact:!0,component:Me})]});return e.isAuthenticated&&(t=Object(a.jsxs)(j.d,{children:[Object(a.jsx)(j.b,{path:"/",exact:!0,render:function(e){return Object(a.jsx)(he,{isAuth:!0})}}),Object(a.jsx)(j.b,{path:"/event-create",component:Ee}),Object(a.jsx)(j.b,{path:"/events/edit/:id",component:Ze}),Object(a.jsx)(j.b,{path:"/events/delete/:id",component:Be}),Object(a.jsx)(j.b,{path:"/reservations",exact:!0,component:He}),Object(a.jsx)(j.b,{path:"/reservations/:id",exact:!0,component:Je}),Object(a.jsx)(j.b,{path:"/reservations/edit/:id",exact:!0,component:$e}),Object(a.jsx)(j.b,{path:"/reserve/:id",exact:!0,component:Me}),Object(a.jsx)(j.b,{path:"/settings",exact:!0,component:at})]})),Object(a.jsxs)("div",{children:[Object(a.jsx)(b.a,{}),Object(a.jsx)(K,{children:t})]})}))),ct=n(393),it={maxGroupSize:null,adminEmail:[],adminFirstName:"",adminLastName:"",signupMessage:""},ot=n(173),st={events:[],created:!1},lt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:st,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f:return Object(Oe.a)(Object(Oe.a)({},e),{},{events:t.payload,created:!1});case g:return e.events.length?Object(Oe.a)(Object(Oe.a)({},e),{},{events:e.events.map((function(e){return e._id===t.payload._id?e=t.payload:e}))}):Object(Oe.a)(Object(Oe.a)({},e),{},{events:e.events.concat(t.payload)});case v:return Object(Oe.a)(Object(Oe.a)({},e),{},{events:[].concat(Object(ot.a)(e.events),[t.payload]),created:!0});case y:return Object(Oe.a)(Object(Oe.a)({},e),{},{events:t.payload});case S:return Object(Oe.a)(Object(Oe.a)({},e),{},{events:e.events.filter((function(e){return e._id!==t.payload}))});case E:return Object(Oe.a)(Object(Oe.a)({},e),{},{created:!0,events:e.events.filter((function(e){return e._id!==t.payload}))});case G:return Object(Oe.a)(Object(Oe.a)({},e),{},{events:[t.payload.dbEvent]});default:return e}},ut={created:!1},dt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ut,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case I:return Object(Oe.a)(Object(Oe.a)({},e),{},{created:!1});case w:return Object(Oe.a)(Object(Oe.a)({},e),{},{group:t.payload,created:!0});case C:return Object(Oe.a)(Object(Oe.a)({},e),{},{created:!0});case G:return Object(Oe.a)({},e);default:return e}},jt={isSignedIn:null,userId:{adminOf:[]}},bt=Object(u.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:jt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case k:return Object(Oe.a)(Object(Oe.a)({},e),{},{isSignedIn:!0,userId:t.payload});case N:return Object(Oe.a)(Object(Oe.a)({},e),{},{isSignedIn:!1,userId:jt.userId});default:return e}},church:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:it,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case T:return Object(Oe.a)(Object(Oe.a)({},e),{},{maxGroupSize:t.payload[0].maxGroupSize,signupMessage:t.payload[0].signupMessage});case _:return Object(Oe.a)(Object(Oe.a)({},e),{},{adminEmail:t.payload.adminEmail,adminFirstName:t.payload.adminFirstName,adminLastName:t.payload.adminLastName,maxGroupSize:t.payload.maxGroupSize,signupMessage:t.payload.signupMessage});default:return e}},event:lt,group:dt,form:ct.a}),pt=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||u.d,ht=Object(u.e)(bt,pt(Object(u.a)(d.a)));o.a.render(Object(a.jsx)(l.a,{store:ht,children:Object(a.jsx)(s.a,{children:Object(a.jsx)(rt,{})})}),document.querySelector("#root"))}},[[329,1,2]]]);
//# sourceMappingURL=main.6cdbe1f2.chunk.js.map